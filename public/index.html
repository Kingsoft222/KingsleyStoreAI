<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kingsley Store | AI Virtual Try-On</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <header class="app-header">
        <button class="menu-btn">‚ò∞</button>
        <div class="cart-icon">üõí<span class="count" id="cart-count">0</span></div>
    </header>

    <main class="home-container">
        <div class="store-profile" id="main-profile">
            <div class="profile-pic-area">
                <div class="profile-pic" onclick="document.getElementById('store-owner-upload').click()">
                    <img src="images/kingsley.jpg" id="owner-img" alt="Kingsley" onerror="this.src='https://via.placeholder.com/110?text=Profile'">
                    <input type="file" id="store-owner-upload" hidden accept="image/*" onchange="previewStoreOwnerPhoto(event)">
                    <div class="edit-badge">‚úé</div>
                </div>
                <div class="profile-controls">
                    <button id="save-profile-btn" style="display:none;" onclick="saveProfilePhoto()">Save</button>
                    <button id="remove-profile-btn" onclick="removeProfilePhoto()">-</button>
                </div>
            </div>
            <h1 class="store-name">Kingsley Store</h1>
            <p class="greeting">Nne, what are you looking for today?</p>
        </div>

        <div id="ai-results" class="results-grid" style="display:none;"></div>

        <div class="options-wrapper" id="chips-area">
            <div class="split-cards">
                <div class="chip" onclick="applyPrompt('Dinner outfit')">
                    <strong>Dinner Outfits</strong>
                    <span>See exclusive female</span>
                </div>
                <div class="chip" onclick="applyPrompt('Trousers')">
                    <strong>Trousers</strong>
                    <span>Shop stylish trousers</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="prompt-footer">
        <div class="prompt-bar">
            <input type="text" id="ai-input" placeholder="Search Senator or Ankara...">
            <button id="voice-record-btn" class="icon-btn large-mic">üéôÔ∏è</button>
            <button id="send-btn" class="send-icon-btn">
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.01 21L23 12L2.01 3L2 10L17 12L2 14L2.01 21Z" fill="white"/>
                </svg>
            </button>
        </div>
    </footer>

    <section id="try-on-area" class="overlay-panel" style="display:none;">
        <div class="panel-content">
            <button class="close-btn" onclick="closeFittingRoom()">‚úï</button>
            <h2 style="text-align:center; margin-bottom: 5px;">AI Fitting Room</h2>
            <p style="text-align:center; font-size: 0.9rem; color: #666; margin-bottom: 20px;">
                Upload your real image and try on this outfit virtually and see how great it looks on you.
            </p>
            
            <div class="upload-box" onclick="document.getElementById('user-photo').click()">
                <p id="upload-status">No photo selected</p>
                <input type="file" id="user-photo" accept="image/*" hidden onchange="handleFileUpload(event)">
            </div>

            <button id="action-btn" class="primary-btn" onclick="triggerAction()">Upload your image</button>
            
            <div id="ai-output-container"></div>
            
            <button id="done-btn" class="primary-btn" style="display:none; margin-top:10px; background:#eee; color:#333;" onclick="resetFittingRoom()">Done</button>
        </div>
    </section>

    <div id="recording-overlay" class="voice-modal" style="display:none;">
        <div class="modal-card">
            <div class="voice-wave"><span></span><span></span><span></span><span></span><span></span></div>
            <p>Listening...</p>
            <p id="live-transcript" style="color:red; font-weight:bold;"></p>
            <button class="primary-btn" onclick="stopRecording()">Process Voice</button>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>